{
  "swagger": "2.0",
  "info": {
    "description": "This is a sample server Petstore server.  You can find out more about     Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).      For this sample, you can use the api key `special-key` to test the authorization     filters.",
    "version": "1.0.0",
    "title": "TFG: Presentacion virtual",
    "contact": {
      "name": "Sergio Caballero Garrido",
      "email": "scg00046@red.ujaen.es"
    }
  },
  "externalDocs": {
    "description": "Find out more about Swagger",
    "url": "http://swagger.io"
  },
  "host": "localhost:8080",
  "basePath": "/virtualpresentation",
  "tags": [
    {
      "name": "Usuario",
      "description": "Datos del usuario, login, etc"
    },
    {
      "name": "Presentaciones",
      "description": "Acceso y listado de presentaciones"
    },
    {
      "name": "Sesiones",
      "description": "Permite crear y eliminar sesiones"
    },
    {
      "name": "Portal",
      "description": "Portal de presentación",
      "externalDocs": {
        "description": "Find out more about our store",
        "url": "http://swagger.io"
      }
    }
  ],
  "schemes": [
    "http"
  ],
  "paths": {
    "/usuario": {
      "post": {
        "tags": [
          "Usuario"
        ],
        "summary": "Autenticación en la aplicación",
        "description": "Permite autenticarse en la aplicación y obtener los datos del usuario",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "User",
            "description": "Datos de autenticación",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Autenticacion"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Información del usuario",
            "schema": {
              "$ref": "#/definitions/Usuario"
            }
          },
          "400": {
            "description": "No se han recibido datos de usuario",
            "schema": {
              "type": "string"
            }
          },
          "401": {
            "description": "Usuario o contraseña incorrecto",
            "schema": {
              "type": "string"
            }
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      },
      "put": {
        "tags": [
          "Usuario"
        ],
        "summary": "Registro de usuario",
        "description": "Permite registrarse en la aplicación",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "User",
            "description": "Datos de usuario",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Usuario"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Registro completo",
            "schema": {
              "$ref": "#/definitions/Usuario"
            }
          },
          "400": {
            "description": "No se han recibido datos de usuario",
            "schema": {
              "type": "string"
            }
          },
          "401": {
            "description": "Usuario o contraseña incorrecto",
            "schema": {
              "type": "string"
            }
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      }
    },
    "/{usuario}": {
      "get": {
        "tags": [
          "Presentaciones"
        ],
        "security": [
          {
            "token": []
          }
        ],
        "summary": "Listado de presentaciones",
        "description": "Consulta la lista de presentaciones registradas",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Información del usuario",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Presentacion"
              }
            }
          },
          "400": {
            "description": "No se han recibido datos de usuario",
            "schema": {
              "type": "string"
            }
          },
          "401": {
            "description": "Usuario o contraseña incorrecto",
            "schema": {
              "type": "string"
            }
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      },
      "put": {
        "tags": [
          "Presentaciones"
        ],
        "security": [
          {
            "token": []
          }
        ],
        "summary": "Almacena nueva presentación en el servidor",
        "description": "Consulta la lista de presentaciones registradas",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          },
          {
            "in": "formData",
            "name": "presentacion",
            "description": "Presentacion a almacenar",
            "type": "file"
          }
        ],
        "responses": {
          "200": {
            "description": "Presentacion almacenada",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "No se han recibido datos de usuario",
            "schema": {
              "type": "string"
            }
          },
          "403": {
            "description": "Usuario no registrado",
            "schema": {
              "type": "string"
            }
          },
          "406": {
            "description": "La presentación ya existe",
            "schema": {
              "type": "string"
            }
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      },
      "delete": {
        "tags": [
          "Presentaciones"
        ],
        "security": [
          {
            "token": []
          }
        ],
        "summary": "Elimina presentación",
        "description": "Elimina la presentación seleccionda, así como el listado de notas permanentes",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          },
          {
            "in": "header",
            "name": "presentación",
            "required": true,
            "description": "Nombre de la presentación a eliminar",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Presentacion eliminada",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "No se han recibido datos de usuario",
            "schema": {
              "type": "string"
            }
          },
          "403": {
            "description": "Usuario no registrado",
            "schema": {
              "type": "string"
            }
          },
          "406": {
            "description": "La presentación ya existe",
            "schema": {
              "type": "string"
            }
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      }
    },
    "/session/{usuario}": {
      "post": {
        "tags": [
          "Sesiones"
        ],
        "security": [
          {
            "token": []
          }
        ],
        "summary": "Crea nueva sesión",
        "description": "Permite generar una sesión para el usuario",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          },
          {
            "in": "body",
            "name": "Sesión",
            "description": "Datos de la sesión",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Sesion"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión creada",
            "schema": {
              "type": "string"
            }
          },
          "401": {
            "description": "Autenticación errónea",
            "schema": {
              "type": "string"
            }
          },
          "406": {
            "$ref": "#/responses/datos_insuficientes"
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      },
      "delete": {
        "tags": [
          "Sesiones"
        ],
        "security": [
          {
            "token": []
          }
        ],
        "summary": "Elimina sesión",
        "description": "Elimina la sesión registrada a partir del usuario y el nombre de la sesión",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          },
          {
            "in": "header",
            "name": "session",
            "description": "Nombre de la sesión a eliminar",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión borrada",
            "schema": {
              "type": "string"
            }
          },
          "403": {
            "description": "El usuario no es correcto",
            "schema": {
              "type": "string"
            }
          },
          "406": {
            "$ref": "#/responses/datos_insuficientes"
          },
          "500": {
            "$ref": "#/responses/500"
          }
        }
      }
    },
    "/{usuario}/{sesion}": {
      "get": {
        "tags": [
          "Portal"
        ],
        "summary": "Autenticación en la aplicación",
        "description": "Consulta la lista de presentaciones registradas",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/html"
        ],
        "parameters": [
          {
            "$ref": "#/parameters/Usuario"
          },
          {
            "$ref": "#/parameters/Sesion"
          }
        ],
        "responses": {
          "200": {
            "description": "Portal de presentación"
          },
          "500": {
            "description": "Error en la sesión"
          }
        }
      }
    }
  },
  "securityDefinitions": {
    "token": {
      "type": "apiKey",
      "name": "Autenticacion",
      "in": "header",
      "required": true
    }
  },
  "definitions": {
    "Usuario": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "nombreusuario": {
          "type": "string"
        },
        "nombre": {
          "type": "string"
        },
        "apellidos": {
          "type": "string"
        },
        "token": {
          "type": "string"
        }
      }
    },
    "Autenticacion": {
      "type": "object",
      "properties": {
        "user": {
          "description": "Nick de usuario",
          "type": "string"
        },
        "password": {
          "type": "string",
          "format": "password"
        }
      }
    },
    "Presentacion": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "nombrepresentacion": {
          "type": "string"
        },
        "numpags": {
          "type": "integer"
        }
      }
    },
    "Sesion":{
      "type": "object",
      "properties": {
        "session": {
          "type": "string"
        },
        "presentation": {
          "type": "string"
        }
      }
    }
  },
  "parameters": {
    "Usuario": {
      "in": "path",
      "name": "usuario",
      "description": "Nick de usuario",
      "required": true,
      "type": "string"
    },
    "Sesion": {
      "in": "path",
      "name": "sesion",
      "description": "Nombre de la sesión",
      "required": true,
      "type": "string"
    }
  },
  "responses": {
    "500": {
      "description": "Error en el servidor",
      "schema": {
        "type": "string"
      }
    },
    "datos_insuficientes": {
      "description": "No se han recibido datos",
      "schema": {
        "type": "string"
      }
    }
  }
}